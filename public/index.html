<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Stripe Checkout Example</title>
    <script src="https://js.stripe.com/v3/"></script>
</head>

<body>
    <h1>Buy Our Product</h1>
    <p>Price: €20.00</p>
    <button id="checkout-button">Buy Now</button>

    <script>
        const stripe = Stripe('pk_test_51JIWWjBJd4ms3fKh3LnU8EOmOgfA1t1sREMPdnrjrIKK7JquSrIDMxL9D4DIIRo8n7s1Z77XzEtAaECJq5BTL6LB008Nl2Kr6e'); // Replace with your Stripe Publishable Key

        document.getElementById('checkout-button').addEventListener('click', () => {
            fetch('/.netlify/functions/create-checkout-session', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ price: 2000 }) // Price in cents (€20.00)
            })
                .then(res => res.json())
                .then(data => {
                    if (data.sessionId) {
                        stripe.redirectToCheckout({ sessionId: data.sessionId });
                    } else {
                        alert('Failed to initiate Stripe Checkout');
                    }
                })
                .catch(err => console.error('Error:', err));
        });
    </script>
</body>

</html>